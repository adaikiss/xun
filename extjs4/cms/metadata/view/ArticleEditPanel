{
    "type": "Ext.form.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "border": false,
        "frame": true,
        "height": null,
        "loader": [
            "{\r",
            "    type: 'json',\r",
            "\troot: 'data',\r",
            "    successProperty: 'success'\r",
            "}"
        ],
        "width": null,
        "designer|userClassName": "ArticleEditPanel",
        "designer|userAlias": "articleEditPanel",
        "autoScroll": true,
        "bodyPadding": 5,
        "closable": true,
        "fieldDefaults": [
            "{\r",
            "\tlabelAlign: 'right',\r",
            "\tlabelWidth: 65\r",
            "}"
        ],
        "api": null,
        "url": "admin/article/update",
        "waitMsgTarget": [
            "true"
        ]
    },
    "designerId": "0c3cf223-6710-4e3e-83c0-7e627be8b401",
    "cn": [
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "defaults": [
                    "{\r",
                    "    columnWidth : 1,\r",
                    "    padding : 2\r",
                    "}"
                ],
                "layout": "column",
                "title": "文章信息"
            },
            "designerId": "7700ec6f-f218-4f95-ae61-63f82fde8c16",
            "cn": [
                {
                    "type": "Ext.form.field.Display",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|columnWidth": 0.5,
                        "fieldLabel": "编号",
                        "name": "id",
                        "value": null
                    },
                    "designerId": "907894c3-b93b-42b3-aa54-eff4ace750b5"
                },
                {
                    "type": "Ext.form.field.Display",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|columnWidth": 0.5,
                        "fieldLabel": "所属栏目",
                        "name": "channelName",
                        "value": null
                    },
                    "designerId": "2694d613-ef96-4403-b50f-94f4fd8a3ba3"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "文章标题",
                        "name": "title",
                        "allowBlank": false,
                        "maxLength": 100
                    },
                    "designerId": "338865b4-d932-447e-bce8-246b0e382381"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "文章模板",
                        "name": "tpl",
                        "maxLength": 50
                    },
                    "designerId": "343143bc-fc21-44de-bf5d-76e09b4b6ac9"
                },
                {
                    "type": "Ext.form.field.Display",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|columnWidth": 0.5,
                        "fieldLabel": "上一篇",
                        "name": "prev",
                        "value": null
                    },
                    "designerId": "556d8d37-2303-44cb-97df-084d67ea4c65"
                },
                {
                    "type": "Ext.form.field.Display",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|columnWidth": 0.5,
                        "fieldLabel": "下一篇",
                        "name": "next",
                        "value": null
                    },
                    "designerId": "08886b8f-21f5-4b50-a81e-685962180032"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|columnWidth": 0.5,
                        "fieldLabel": "权重",
                        "name": "weight"
                    },
                    "designerId": "0faafffe-2c25-4fd7-832a-dfbce266d855"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|columnWidth": 0.5,
                        "fieldLabel": "点击量",
                        "name": "visits"
                    },
                    "designerId": "713a4a37-c7b0-4340-ab52-5e94c4068831"
                },
                {
                    "type": "Ext.form.field.Display",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|columnWidth": 0.5,
                        "fieldLabel": "创建时间",
                        "name": "date",
                        "value": null
                    },
                    "designerId": "128f11be-f8f0-4fb5-96ef-ee8c727b423f"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|columnWidth": 0.5,
                        "fieldLabel": "关键字",
                        "name": "keywords"
                    },
                    "designerId": "3fef25c5-0987-43de-a156-ee301ba0f5dd"
                },
                {
                    "type": "Ext.form.field.TextArea",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "摘要",
                        "name": "excerpt",
                        "maxLength": 250
                    },
                    "designerId": "e3f7ffc8-aa02-472f-95d8-f37cb66d22b9"
                },
                {
                    "type": "Ext.form.Label",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|columnWidth": 0.5,
                        "width": null,
                        "text": "内容"
                    },
                    "designerId": "e9018bd2-80ae-4178-affa-ce590a10e0d1"
                },
                {
                    "type": "Ext.form.field.HtmlEditor",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 150,
                        "fieldLabel": null,
                        "hideLabel": true,
                        "name": "content"
                    },
                    "designerId": "de6d3416-4223-4a09-bb80-f26e61006e9f"
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "loadForm",
                "implHandler": [
                    "var me = this;\r",
                    "this.getForm().load({\r",
                    "    url:'admin/article/read',\r",
                    "    params: {\r",
                    "        id: this.articleId\r",
                    "    },\r",
                    "    waitMsg : '加载中...',\r",
                    "    failure: function (fm, action) {\r",
                    "        Ext.MessageBox.alert('提示', getErrorMsg(action));\r",
                    "    }\r",
                    "});\r",
                    "return;\r",
                    "Ext.Ajax.request({\r",
                    "    url:this.api.load,\r",
                    "    params: {\r",
                    "        id: this.articleId\r",
                    "    },\r",
                    "    loadMask: {msg: '加载中...'},\r",
                    "    success : function(response, options){\r",
                    "        console.debug(response, options);\r",
                    "        var result = Ext.JSON.decode(response.responseText);\r",
                    "        if(result.success){\r",
                    "            me.getForm().reset();\r",
                    "            me.getForm().setValues(result.data);\r",
                    "            return;\r",
                    "        }\r",
                    "        Ext.MessageBox.alert('提示', result.msg);\r",
                    "    },\r",
                    "    failure: function (fm, action) {\r",
                    "        Ext.MessageBox.alert('提示', getErrorMsg(action));\r",
                    "    }\r",
                    "});"
                ]
            },
            "designerId": "8f6211b1-1088-4984-ae6a-d1adeac8a0b7"
        },
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "bottom",
                "container|pack": "center",
                "ui": "footer"
            },
            "designerId": "119c97c6-490b-4e98-8891-60cfe516142b",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "text": "保存"
                    },
                    "designerId": "0753098a-9a16-42e9-ac07-9975137ddd51",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "handler",
                                "designer|params": [
                                    "button",
                                    "event"
                                ],
                                "implHandler": [
                                    "var formPanel = this.up('form');\r",
                                    "var form = formPanel.getForm();\r",
                                    "if (form.isValid()) {\r",
                                    "    form.submit({\r",
                                    "        params: {\r",
                                    "            id: formPanel.articleId\r",
                                    "        },\r",
                                    "        method: 'POST',\r",
                                    "        success: function (fm, action) {\r",
                                    "            Ext.MessageBox.alert('提示', '操作成功!');\r",
                                    "        },\r",
                                    "        failure: function (fm, action) {\r",
                                    "            Ext.MessageBox.alert('提示', getErrorMsg(action));\r",
                                    "        }\r",
                                    "    });\r",
                                    "}"
                                ]
                            },
                            "designerId": "1ffe9f77-ad86-46ba-a27e-a385684eaf75"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "text": "重新加载"
                    },
                    "designerId": "ddca51ab-5554-40c6-b039-4e73eda81d0c",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "handler",
                                "designer|params": [
                                    "button",
                                    "event"
                                ],
                                "implHandler": [
                                    "this.up('form').loadForm();"
                                ]
                            },
                            "designerId": "008d9fd6-031f-478c-a875-9971264d381e"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onFormAfterRender",
                "implHandler": [
                    "this.loadForm();"
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "designerId": "858afb69-b910-49fd-bb50-e717f1d53388"
        },
        {
            "type": "processcfgfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "processArticleEditPanel",
                "designer|params": [
                    "config"
                ],
                "implHandler": [
                    "//config.store = Ext.create('CMS.data.Article');\r",
                    "//config.store.container = this;\r",
                    "return config;"
                ]
            },
            "designerId": "92cb15d6-2b58-4d4b-a6bd-b7ebbd3b56d8"
        }
    ]
}